<%- include("../partials/_headerAdmin", { titulo: titulo }) %>

<div class="container mt-5 datos">
  <div class="row">
    <div class="col-md-5 offset-md-3 card">
      <div class="card-body">
        <form action="/updateCita/<%= cita.id %>" method="POST">
          <div>
            <label for="form-outline">ID del usuario</label>
            <input
              type="number"
              value="<%= cita.id_usuario %>"
              readonly
              class="form-control mb-3"
            />
          </div>

          <% function formatFecha(fecha) {
            const date = new Date(fecha);
            const options = { day: '2-digit', month: '2-digit', year: 'numeric' };
            const formattedDate = date.toLocaleDateString('es-ES', options);
            return formattedDate.split('/').reverse().join('/');
          } %>
        
          <div class="form-outline-mb-4">
            <label for="form-outline">Fecha de registro</label>
            <input
              type="text"
              value="<%= formatFecha(cita.fechaRegistro) %>"
              class="form-control mb-3"
              readonly
            />
          </div>

          <div class="form-outline-mb-4">
            <label for="form-outline">Motivo</label>
            <input
              type="text"
              value="<%= cita.motivo %>"
              placeholder="Motivo de la cita"
              class="form-control mb-3"
              readonly
            />
          </div>

          <div class="form-outline-mb-4">
            <label for="form-outline">Descripci칩n</label>
            <input
              type="text"
              value="<%= cita.descripcion %>"
              placeholder="Detalles de la cita"
              class="form-control mb-3"
              readonly
            />
          </div>

          <div class="form-outline-mb-4">
            <label for="form-outline">Lugar (actual: <%= cita.lugar %>)</label>
            <select name="lugar" class="form-control mb-3" required>
              <option value="Sin asignar" <%= cita.lugar === 'Sin asignar' ? 'selected' : '' %>>Sin asignar</option>
              <option value="Miguel Hidalgo #12" <%= cita.lugar === 'Miguel Hidalgo #12' ? 'selected' : '' %>>Miguel Hidalgo #12</option>
              <option value="Ignacio Nu침ez #114" <%= cita.lugar === 'Ignacio Nu침ez #114' ? 'selected' : '' %>>Ignacio Nu침ez #114</option>
            </select>
          </div>

          <div class="form-outline-mb-4">
            <label for="form-outline">Estatus (actual: <%= cita.estatus %>)</label>
            <select name="estatus" class="form-control mb-3" required>
              <option value="Efectuado" <%= cita.estatus === 'Efectuado' ? 'selected' : '' %>>Efectuado</option>
              <option value="Pendiente" <%= cita.estatus === 'Pendiente' ? 'selected' : '' %>>Pendiente</option>
              <option value="Cancelado" <%= cita.estatus === 'Cancelado' ? 'selected' : '' %>>Cancelado</option>
            </select>
          </div>

          <div class="form-outline-mb-4">
            <label for="form-outline">Fecha a programar</label>
            <input
              type="date"
              name="fechaProgramada"
              value="<%= cita.fechaProgramada %>"
              class="form-control mb-3"
              required
            />
          </div>
          
          <br>
          <button type="submit" class="btn btn-info btn-Act" style="margin: 2px;">Actualizar datos</button>
          <a href="/citas" class="btn btn-secondary btn-Act">Cancelar</a>
        </form>
      </div>
    </div>
  </div>
</div>

<%- include("../partials/_footer") %>
